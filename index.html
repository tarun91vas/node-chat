<!-- Include socket.io -->
<script src = "/socket.io/socket.io.js"></script>
<!-- Include jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>



<!-- Chat Box -->
<fieldset>
  <legend>Chat Box:</legend>
  <p id="status"></p>
  <div id= "chat_list"></div>
 </fieldset>
<br/>
<form id="chat_form" action="#">
  <input type="textarea" id ="chat_msg" value="">
  <input type="submit" value="Send">
</form>



<script>
	//Connect to server
	var socket = io.connect('http://localhost:8080');

	socket.on('connect', function() {
		var  nickname = prompt('Enter your username');
		socket.emit('join', nickname);
		$('#status').html('Connected to chatroom...');

	});

	// On recieving message from server append to chat list
	socket.on('messages', function (data) {
		console.log(socket);
		$('#chat_list').append('<p>' +  data + '</p>');
	});

	//On form submit, send message to server
	$( "#chat_form" ).submit(function( event ) {
	  var msg = $('#chat_msg').val();
	  socket.emit('messages', msg);
	});

</script>